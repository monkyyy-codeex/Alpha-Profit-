<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AlphaProfit ‚Äî Admin Dashboard</title>

  <!-- Font & icons -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <!-- Admin styles -->
  <link rel="stylesheet" href="admin.css">
</head>
<body>
  <div class="bg-overlay" aria-hidden="true"></div>

  <div class="admin-app">
    <header class="admin-header">
      <div class="brand">
        <img src="alpha logo.png" alt="Alpha logo" class="brand-logo">
        <div>
          <div class="title">ALPHAPROFIT ‚Äî Admin</div>
          <div class="sub">Admin Console ‚Ä¢ Monitor & Approve</div>
        </div>
      </div>

      <div class="header-actions">
        <div class="search-wrapper">
          <input id="globalSearch" placeholder="Search deposits, withdrawals, user, plan..." />
          <button class="btn-search" onclick="globalSearch()">üîç</button>
        </div>

        <div class="admin-quick">
          <button class="btn" onclick="openImportModal()">Import JSON</button>
          <button class="btn" onclick="exportActivityCSV()">Export Logs</button>
          <button class="btn-logout" onclick="adminLogout()">Log Out</button>
        </div>
      </div>
    </header>

    <nav class="admin-tabs" role="tablist" aria-label="Admin Tabs">
      <button class="tab active" data-tab="overview" onclick="openTab('overview')">Overview</button>
      <button class="tab" data-tab="pending" onclick="openTab('pending')">Pending Deposits</button>
      <button class="tab" data-tab="withdrawals" onclick="openTab('withdrawals')">Withdrawals</button>
      <button class="tab" data-tab="approved" onclick="openTab('approved')">Approved Investments</button>
      <button class="tab" data-tab="logs" onclick="openTab('logs')">Activity Logs</button>
    </nav>

    <main class="admin-main">
      <!-- Overview -->
      <section id="overview" class="admin-section active">
        <div class="cards">
          <div class="card stat-card">
            <div class="label">Investors</div>
            <div id="statInvestors" class="num">0</div>
          </div>

          <div class="card stat-card">
            <div class="label">Total Deposits (Approved)</div>
            <div id="statDeposits" class="num">‚Ç±0.00</div>
          </div>

          <div class="card stat-card">
            <div class="label">Total Staked</div>
            <div id="statStaked" class="num">‚Ç±0.00</div>
          </div>

          <div class="card stat-card">
            <div class="label">Pending Count</div>
            <div id="statPending" class="num">0</div>
          </div>
        </div>

        <div class="card full-card">
          <h3>Quick Actions</h3>
          <div class="admin-controls">
            <button class="btn-approve" onclick="approveAllPending()">Approve All (void)</button>
            <button class="btn-reject" onclick="rejectAllPending()">Reject All</button>
            <button class="btn-sync" onclick="syncWithServer()">Sync with Server (void)</button>
            <button class="btn-export" onclick="exportActivityCSV()">Export Logs CSV</button>
            <button class="btn-credit" onclick="openManualCreditModal()">Manual Credit</button>
          </div>
          <p class="hint">Use manual credit to fix balances, reward users, or handle offline payments.</p>
        </div>
      </section>

      <!-- Pending deposits -->
      <section id="pending" class="admin-section">
        <div class="card">
          <div class="card-head">
            <h3>Pending Deposit Receipts</h3>
            <div class="filters">
              <input id="filterUser" placeholder="Filter by plan / note / id" />
              <select id="filterStatus">
                <option value="pending">Pending</option>
                <option value="all">All</option>
              </select>
              <button class="btn" onclick="renderPending()">Apply</button>
            </div>
          </div>

          <div id="pendingList" class="list"></div>
        </div>
      </section>

      <!-- Withdrawals -->
      <section id="withdrawals" class="admin-section">
        <div class="card">
          <div class="card-head">
            <h3>Withdrawal Requests</h3>
            <div class="filters">
              <input id="filterWithdraw" placeholder="Filter by method / account / amount" />
              <select id="filterWithdrawStatus">
                <option value="pending">Pending</option>
                <option value="all">All</option>
              </select>
              <button class="btn" onclick="renderWithdrawalsAdmin()">Apply</button>
            </div>
          </div>

          <div id="withdrawList" class="list"></div>
        </div>
      </section>

      <!-- Approved -->
      <section id="approved" class="admin-section">
        <div class="card">
          <h3>Approved Deposits / Investments</h3>
          <div id="approvedList" class="list"></div>
        </div>
      </section>

      <!-- Logs -->
      <section id="logs" class="admin-section">
        <div class="card">
          <h3>Activity Logs</h3>
          <div style="margin-bottom:10px">
            <button class="btn" onclick="clearLogs()">Clear Logs</button>
            <button class="btn" onclick="exportActivityCSV()">Export Logs</button>
          </div>
          <div id="activityLog" class="list"></div>
        </div>
      </section>
    </main>
  </div>

  <!-- Manual Credit Modal -->
  <div id="manualCreditModal" class="modal">
    <div class="box">
      <h3>Manual Credit to Wallet</h3>
      <label>User Identifier (username)</label>
      <input id="manualUser" placeholder="username or session key">
      <label>Amount (‚Ç±)</label>
      <input id="manualAmount" type="number" min="0" placeholder="e.g., 5000">
      <label>Note</label>
      <input id="manualNote" placeholder="Reason or reference (optional)">
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px;">
        <button class="btn" onclick="closeManualCreditModal()">Cancel</button>
        <button class="btn-approve" onclick="submitManualCredit()">Credit Wallet</button>
      </div>
    </div>
  </div>

  <!-- Import JSON Modal (void) -->
  <div id="importModal" class="modal">
    <div class="box">
      <h3>Import JSON Data (void)</h3>
      <p class="small-muted">Paste JSON data to import into localStorage (for demo/testing). This is a void helper ‚Äî validate before importing.</p>
      <textarea id="importJson" style="width:100%;height:140px;background:#0f0f12;color:#fff;border-radius:8px;padding:10px;border:1px solid rgba(255,255,255,0.04)"></textarea>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px;">
        <button class="btn" onclick="closeImportModal()">Cancel</button>
        <button class="btn-approve" onclick="importJsonData()">Import</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <script src="admin.js"></script>
</body>
</html>
